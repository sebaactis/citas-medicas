---
import "@/styles/globals.css";
import Layout from "../layouts/Layout.astro";
import MedicineCard from "@/components/medicine/MedicineCard"

let items = [];

try {
    const response = await fetch("http://localhost:4321/api/medicine/medicines")
    items = await response.json();

} catch (error) {
    console.error(error);
}

---

<Layout title="Medical dashboard">
    <section class="flex flex-col items-center mb-4">
        <h3
            class="text-center font-bold text-3xl my-10 dark:text-white uppercase"
        >
            Medicines
        </h3>
        <article class="w-5/6 grid grid-cols-12 gap-7">
            {
                items.length > 0 ? (
                    items.map((item: any) => {
                        return (
                            <MedicineCard id={item.id} name={item.name} price={item.price} client:load />
                        );
                    })
                ) : (
                    <p>Medicines not found</p>
                )
            }
        </article>
    </section>
</Layout>
